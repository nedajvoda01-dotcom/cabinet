<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>АвтоКонтент</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
:root {
  /* ======================================================================
     COLOR SYSTEM (как раньше)
  ====================================================================== */
  --c-black: #000000;
  --c-white: #F9F9F9;
  --c-gray-dark: #333333;
  --c-gray: #646464;
  --c-gray-light: #A7A7A7;

  /* акценты */
  --c-orange: #E85002;
  --g-1: #000000;
  --g-2: #C10801;
  --g-3: #F16001;
  --g-4: #D9C3AB;

  /* ======================================================================
     LAYOUT
  ====================================================================== */
  --radius-md: 12px;
  --sidebar-w: 260px;
  --sidebar-w-collapsed: 48px;
  --logo-area-h: 76px;
  --logo-top: 18px;

  /* ======================================================================
     FONTS
  ====================================================================== */
  --font-sans: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
  --font-brand: "HandelGothic BT Rus By Me", var(--font-sans);

  --fs-11: 11px;
  --fs-12: 12px;
  --fs-13: 13px;
  --fs-15: 15px;
  --fs-20: 20px;
  --fs-24: 24px;
  --fs-44: 44px;

  --fw-menu: 350;
  --fw-regular: 400;
  --fw-medium: 500;
  --fw-semibold: 600;
  --fw-bold: 700;

  --lh-tight: 1.1;
  --lh-snug: 1.25;
  --lh-normal: 1.45;
  --lh-ui: 1.0;

  --ls-ui: 0.02em;
  --ls-brand: 0.2px;
}

@font-face{
  font-family: "HandelGothic BT Rus By Me";
  src:
    local("HandelGothicBTRusbyme-Regular"),
    local("HandelGothic BT [Rus by me] Regular"),
    url("./fonts/HandelGothicBTRusbyme-Regular.woff2") format("woff2"),
    url("./fonts/HandelGothicBTRusbyme-Regular.woff") format("woff"),
    url("./fonts/HandelGothicBTRusbyme-Regular.ttf") format("truetype");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

* { box-sizing: border-box; margin: 0; padding: 0; }
body {
  font-family: var(--font-sans);
  background: var(--c-white);
  color: var(--c-black);
  min-height: 100vh;
}

.layout { display:flex; width:100%; min-height:100vh; position:relative; }

/* ======================================================================
   TYPOGRAPHY ROLES (как раньше)
====================================================================== */
.ty-logo{
  font-family: var(--font-brand);
  font-size: calc(var(--fs-20) + 2px);
  font-weight: var(--fw-bold);
  line-height: var(--lh-snug);
  letter-spacing: var(--ls-brand);
}
.ty-pill{
  font-family: var(--font-sans);
  font-size: var(--fs-11);
  font-weight: var(--fw-bold);
  line-height: var(--lh-ui);
}
.ty-section{
  font-family: var(--font-sans);
  font-size: var(--fs-12);
  font-weight: var(--fw-menu); /* тонко */
  letter-spacing: var(--ls-ui);
  line-height: var(--lh-ui);
}
.ty-nav{
  font-family: var(--font-sans);
  font-size: var(--fs-13);
  font-weight: var(--fw-menu);
  line-height: var(--lh-normal);
}
.ty-body{
  font-family: var(--font-sans);
  font-size: var(--fs-15);
  font-weight: var(--fw-regular);
  line-height: var(--lh-normal);
}
.ty-title{
  font-family: var(--font-sans);
  font-size: var(--fs-24);
  font-weight: var(--fw-semibold);
  line-height: var(--lh-snug);
}
.ty-hero{
  font-family: var(--font-sans);
  font-size: var(--fs-44);
  font-weight: var(--fw-bold);
  line-height: var(--lh-tight);
}

/* ======================================================================
   SIDEBAR LAYOUT
====================================================================== */
.sidebar {
  width: var(--sidebar-w);
  background: var(--c-black);
  border-right: 1px solid var(--c-gray-dark);
  position: fixed;
  inset: 0 auto 0 0;
  padding: 16px 0 12px;
  display: flex;
  flex-direction: column;
  transition: width 160ms ease, padding 160ms ease;
  color: var(--c-white);
  z-index: 30;
}
.sidebar.is-collapsed { width: var(--sidebar-w-collapsed); }

.main {
  margin-left: var(--sidebar-w);
  width: calc(100% - var(--sidebar-w));
  min-height: 100vh;
  background: var(--c-white);
  transition: margin-left 160ms ease, width 160ms ease;
  color: var(--c-black);
  position: relative;
}
.sidebar.is-collapsed ~ .main {
  margin-left: var(--sidebar-w-collapsed);
  width: calc(100% - var(--sidebar-w-collapsed));
}

#pageRoot{
  position: relative;
  min-height: 100vh;
  padding: 0;
}

/* ======================================================================
   LOGO AREA
====================================================================== */
.logo-area{
  height: var(--logo-area-h);
  position: relative;
  display: flex;
  align-items: flex-start;
  justify-content: center;
  margin: 0 0 10px;
}
.logo-wrap{
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  gap: 6px;
  width: 100%;
  padding: 6px 10px 8px;
  border-radius: var(--radius-md);
  user-select: none;
  white-space: nowrap;
  overflow: hidden;
}
.logo-main{
  color: var(--c-white);
  width: 100%;
  text-align: center;
  white-space: nowrap;
  overflow: hidden;
  min-height: 1.2em;
}

/* капсула: поднята на 1px, выезжает после печати */
.logo-pill{
  color: var(--c-white);
  background: var(--c-black);
  border: 1px solid var(--c-white);
  border-radius: 9px;
  padding: 3px 9px 2px;
  text-transform: lowercase;
  align-self: flex-end;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transform: translateY(-1px);

  opacity: 0;
  translate: 0 -8px;
  transition: opacity 260ms ease, translate 260ms ease;
  pointer-events: none;
}
.logo-pill.is-revealed{
  opacity: 1;
  translate: 0 0;
  pointer-events: auto;
}
.logo-pill span{ transform: translateY(-1px); }

.sidebar.is-collapsed .logo-wrap{ display: none; }

/* ======================================================================
   LOGO IN COLLAPSED MENU (НОВОЕ)
====================================================================== */
.logo-collapsed{
  position: absolute;
  inset: 0;
  display: none;
  width: 100%;
  color: var(--c-white);
  user-select: none;
  align-items: flex-start;
  justify-content: center;
  padding-top: 6px;
}
.sidebar.is-collapsed .logo-collapsed{ display: flex; }

.mini-logo-stage{
  position: relative;
  width: 100%;
  height: 26px;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
}
.mini-logo-img{
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  transform: translateX(-120%);
}
.mini-logo-img svg{
  width: 26px;
  height: 26px;
  display: block;
  color: currentColor;
}

/* ======================================================================
   NAV + SECTION DIVIDER + BOOKMARKS
====================================================================== */
.nav-section{
  display:flex;
  flex-direction:column;
  gap:6px;
  padding: 0 0 6px;
}
.nav-section-title{
  color: var(--c-white);
  opacity: .65;
  padding: 0 14px;
  margin-top: 6px;
  user-select:none;
  height: 16px;
  display:flex;
  align-items:center;
}
.sidebar.is-collapsed .nav-section-title{
  visibility: hidden;
  opacity: 0;
  pointer-events: none;
}

.nav-section-divider{
  height: 1px;
  background: var(--c-gray-dark);
  margin: 10px 8px;
  border-radius:1px;
}

.nav{
  display:flex;
  flex-direction:column;
  gap:4px;
  margin-top:-5px;
}

.nav-item {
  display:flex; align-items:center; gap:8px;
  margin: 0 5px;
  padding:8px 10px;
  border-radius:12px;
  color: var(--c-white);
  text-decoration:none;
  transition: background 120ms ease, color 120ms ease;
  white-space:nowrap; outline:none; overflow:hidden;
  cursor:pointer;
}
.nav-item .ico{
  width:19px; min-width:19px; height:19px;
  display:flex; align-items:center; justify-content:center;
  color: currentColor; flex:0 0 19px;
}
.nav-item .ico svg{
  width:18px; height:18px;
  stroke:currentColor; fill:none; stroke-width:2px;
}
.sidebar.is-collapsed .nav-item .ico{ transform: translateX(-1px); }

.nav-item .text{
  display:inline-block;
  transition: opacity 140ms ease, transform 140ms ease, width 140ms ease;
  transform: translateX(0); opacity:1; width:auto; overflow:hidden;
}
.sidebar.is-collapsed .nav-item .text{
  opacity:0; transform:translateX(-6px); width:0; pointer-events:none;
}

.nav-item:hover{ background: var(--c-gray-dark); }
.nav-item:active{ background: color-mix(in srgb, var(--c-gray-dark) 85%, black); }
.nav-item.is-active{ background: var(--c-gray); color: var(--c-white); }

/* ======================================================================
   COLLAPSE BUTTON
====================================================================== */
.collapse-row{
  margin-top:auto;
  width: fit-content;
  align-self: flex-end;
  margin-right: 8px;
  display:flex; align-items:center; gap:4px;
  padding:4px 6px;
  background:transparent; border:none;
  color: var(--c-white);
  opacity:.65;
  cursor:pointer;
  user-select:none;
  letter-spacing: var(--ls-ui);
  border-radius: 8px;
}
.collapse-row:hover{ opacity:.9; }
.collapse-ico{
  width:18px;height:18px; color: currentColor;
  display:inline-flex; align-items:center; justify-content:center;
  flex:0 0 18px;
  opacity:.85;
  transition: opacity 120ms ease, transform 120ms ease;
  transform: translateX(2px);
}
.collapse-row:hover .collapse-ico{ opacity:1; transform:translateX(0); }
.sidebar.is-collapsed .collapse-ico{ opacity:1; transform:translateX(0); }

.collapse-text{ white-space:nowrap; }

.sidebar.is-collapsed .collapse-row{
  align-self:center;
  margin-right:0;
  padding:4px 6px;
  gap:0;
}
.sidebar.is-collapsed .collapse-text{ display:none; }

/* ======================================================================
   LOADER / 404
====================================================================== */
.page-loader{
  padding:40px;
  display:grid;
  place-items:center;
  color: var(--c-black);
}
.page-404{
  padding:40px;
  display:grid;
  place-items:center;
}
.page-404-card{
  width:520px; max-width:90%;
  border:1px solid var(--c-gray-light);
  border-radius:16px;
  padding:28px 26px;
  background: var(--c-white);
  text-align:center;
  color: var(--c-black);
}
.page-404-sub{
  color: var(--c-gray);
  margin-top: 8px;
}
  </style>
</head>

<body>
  <div id="app" class="layout">
    <aside class="sidebar" id="sidebar">
      <div class="logo-area">
        <div class="logo-wrap" id="logoWrap">
          <div class="logo-main ty-logo" id="logoMain"></div>
          <div class="logo-pill ty-pill" id="logoPill"><span>кабинет</span></div>
        </div>

        <!-- ✅ лого для закрытого меню -->
        <div class="logo-collapsed" aria-hidden="true" id="logoCollapsed"></div>
      </div>

      <div class="nav-section">
        <div class="nav-section-title ty-section">Навигация</div>
        <nav class="nav" id="navMain">
          <a class="nav-item ty-nav is-active" href="#" data-id="cars">
            <span class="ico" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                   stroke-linecap="round" stroke-linejoin="round">
                <path d="m21 21l-4.486-4.49M19 10.5a8.5 8.5 0 1 1-17 0a8.5 8.5 0 0 1 17 0Z"/>
              </svg>
            </span>
            <span class="text">Поиск автомобилей</span>
          </a>

          <a class="nav-item ty-nav" href="#" data-id="content">
            <span class="ico" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                   stroke-linecap="round" stroke-linejoin="round">
                <path d="M22 19V9a2 2 0 0 0-2-2h-6.764a2 2 0 0 1-1.789-1.106l-.894-1.788A2 2 0 0 0 8.763 3H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2"/>
              </svg>
            </span>
            <span class="text">Контент</span>
          </a>
        </nav>
      </div>

      <div class="nav-section-divider"></div>

      <div class="nav-section">
        <div class="nav-section-title ty-section">Избранное</div>
        <nav class="nav" id="navBookmarks"></nav>
      </div>

      <button class="collapse-row ty-section" id="collapseBtn" type="button" aria-expanded="true">
        <span class="collapse-ico" aria-hidden="true" id="collapseIco"></span>
        <span class="collapse-text" id="collapseText">Свернуть</span>
      </button>
    </aside>

    <main class="main" id="main">
      <div id="pageRoot"></div>
    </main>
  </div>

  <script>
    const Icons = {
      chevronLeftSmall: `
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"
             stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M14.5 7.5L9.5 12l5 4.5"></path>
        </svg>
      `,
      chevronRightSmall: `
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"
             stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M9.5 7.5l5 4.5l-5 4.5"></path>
        </svg>
      `
    };

    /* ======================================================================
       PAGES
    ====================================================================== */
    const PAGE_PATHS = {
      cars: "./pages/cars.html",
      content: "./pages/content.html",
    };

    const pageCache = {};
    const inflight = new Map();

    async function fetchText(url){
      const r = await fetch(url, { cache:"no-store" });
      if (!r.ok) throw new Error("Fetch failed: " + url);
      return r.text();
    }

    async function resolveIncludes(html, baseUrl){
      const parser = new DOMParser();
      const doc = parser.parseFromString(html, "text/html");
      const nodes = [...doc.querySelectorAll("[data-include]")];
      if (nodes.length === 0) return doc.body.innerHTML;

      await Promise.all(nodes.map(async node=>{
        const rel = node.getAttribute("data-include");
        if (!rel) return;
        const abs = new URL(rel, baseUrl).toString();
        let partial = await fetchText(abs);
        partial = await resolveIncludes(partial, abs);
        const wrap = doc.createElement("div");
        wrap.innerHTML = partial;
        node.replaceWith(...wrap.childNodes);
      }));

      return doc.body.innerHTML;
    }

    async function loadPage(id){
      if (pageCache[id]) return pageCache[id];
      if (inflight.has(id)) return inflight.get(id);

      const path = PAGE_PATHS[id];
      if (!path) return null;

      const p = (async ()=>{
        const abs = new URL(path, location.href).toString();
        let html = await fetchText(abs);
        html = await resolveIncludes(html, abs);
        pageCache[id] = html;
        return html;
      })().catch(()=>null).finally(()=>inflight.delete(id));

      inflight.set(id, p);
      return p;
    }

    function restartInlineScripts(container){
      container.querySelectorAll("script").forEach(old=>{
        const s=document.createElement("script");
        [...old.attributes].forEach(a=>s.setAttribute(a.name,a.value));
        s.textContent=old.textContent;
        old.replaceWith(s);
      });
    }

    async function showPage(id){
      const root=document.getElementById("pageRoot");
      root.innerHTML = `<div class="page-loader ty-body">Загрузка…</div>`;

      const html = await loadPage(id);
      const ok = Boolean(html);

      root.innerHTML = ok ? html : `
        <div class="page-404">
          <div class="page-404-card">
            <div class="ty-hero">404</div>
            <div class="ty-title" style="margin-top:4px;">Страница не найдена</div>
            <div class="ty-body page-404-sub">
              Файл не смог загрузиться или отсутствует.<br/>
              Проверь путь: <b>${PAGE_PATHS[id] ?? id}</b>
            </div>
          </div>
        </div>
      `;

      restartInlineScripts(root);
      window.dispatchEvent(new CustomEvent("page:loaded",{detail:{id,ok}}));
    }

    /* ======================================================================
       COLLAPSE
    ====================================================================== */
    const sidebar   = document.getElementById("sidebar");
    const collapseBtn  = document.getElementById("collapseBtn");
    const collapseText = document.getElementById("collapseText");
    const collapseIco  = document.getElementById("collapseIco");

    const STORAGE_KEY = "ehala.sidebar.collapsed.v1";

    function saveCollapsed(v){
      try { localStorage.setItem(STORAGE_KEY, JSON.stringify(Boolean(v))); } catch {}
    }
    function loadCollapsed(){
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        return raw ? JSON.parse(raw) : false;
      } catch { return false; }
    }

    function renderCollapsed(collapsed){
      sidebar.classList.toggle("is-collapsed", collapsed);
      collapseBtn.setAttribute("aria-expanded", String(!collapsed));
      collapseText.textContent = collapsed ? "Развернуть" : "Свернуть";
      collapseIco.innerHTML = collapsed ? Icons.chevronRightSmall : Icons.chevronLeftSmall;
    }

    collapseBtn.addEventListener("click", ()=>{
      const next = !sidebar.classList.contains("is-collapsed");
      renderCollapsed(next);
      saveCollapsed(next);
      if (!next) scheduleTypingStart(); else resetLogo();
    });

    /* ======================================================================
       MENU clicks
    ====================================================================== */
    sidebar.addEventListener("click", async (e)=>{
      const item = e.target.closest(".nav-item[data-id]");
      if (!item) return;
      e.preventDefault();

      sidebar.querySelectorAll(".nav-item")
        .forEach(x => x.classList.remove("is-active"));
      item.classList.add("is-active");

      await showPage(item.dataset.id);
    });

    /* ======================================================================
       LOGO TYPING: ОДИН ВАРИАНТ
    ====================================================================== */
    const logoMain = document.getElementById("logoMain");
    const logoPill = document.getElementById("logoPill");

    let typingTimer = null;
    let isTyping = false;
    let startDelayTimer = null;

    const LOGO_TEXT = АвтоКонтент;

    function stopTyping(){
      isTyping = false;
      if (typingTimer){ clearTimeout(typingTimer); typingTimer = null; }
    }
    function cancelStartDelay(){
      if (startDelayTimer){ clearTimeout(startDelayTimer); startDelayTimer=null; }
    }

    function resetLogo(){
      stopTyping();
      cancelStartDelay();
      logoMain.textContent = "";
      logoPill.classList.remove("is-revealed");
    }

    function startTyping(){
      if (sidebar.classList.contains("is-collapsed")) return;

      resetLogo();
      isTyping = true;

      const chars = Array.from(LOGO_TEXT);
      let i = 0;

      const baseDelay = 55, jitter = 80;

      const typeChar = () => {
        if (!isTyping) return;
        if (i >= chars.length){
          isTyping = false;
          setTimeout(()=>logoPill.classList.add("is-revealed"), 180);
          return;
        }
        logoMain.textContent += chars[i++];
        const d = baseDelay + Math.floor(Math.random() * jitter);
        typingTimer = setTimeout(typeChar, d);
      };

      typeChar();
    }

    function scheduleTypingStart(){
      cancelStartDelay();
      startDelayTimer = setTimeout(()=>{
        startDelayTimer=null;
        startTyping();
      }, 260);
    }

    /* BOOT */
    renderCollapsed(loadCollapsed());
    scheduleTypingStart();
    showPage("cars");
  </script>

  <!-- ======================================================================
       ✅ ВЕСЬ КОД ЛОГО ДЛЯ ЗАКРЫТОГО МЕНЮ — ОТДЕЛЬНО В КОНЦЕ
       (не трогает остальное)
  ====================================================================== -->
  <script>
  const CollapsedMenuLogo = (() => {
    const NORMAL_LOGOS = [
      // маленькая машина 1 (старая)
      `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path fill="currentColor" d="M5.73 19.23q-1.755 0-2.992-1.237T1.5 15t1.238-2.993t2.993-1.238t2.993 1.238T9.962 15t-1.238 2.993t-2.993 1.238m-.005-3.116q-.466 0-.788-.326t-.322-.793t.326-.79q.327-.321.793-.321q.467 0 .789.326q.322.327.322.793q0 .467-.326.79q-.327.322-.794.322M19.5 19.23q-1.258 0-2.129-.872q-.871-.87-.871-2.128t.871-2.129t2.129-.871t2.129.871t.871 2.129t-.871 2.128q-.871.872-2.129.872M3.692 9.269q-.212 0-.356-.144t-.144-.357t.144-.356t.356-.143h3.116q.479 0 .855.28t.53.72zm2.039 8.962q1.346 0 2.288-.943T8.961 15t-.942-2.289t-2.288-.942t-2.289.942T2.5 15t.942 2.289t2.289.942m13.769 0q.817 0 1.409-.592q.591-.591.591-1.408t-.591-1.409t-1.409-.591t-1.409.591t-.591 1.409t.591 1.408t1.409.592M10.689 15.5H15.8q.327-1.377 1.397-2.183t2.417-.806q.339 0 .671.06t.677.198V8.385q0-.667-.475-1.141t-1.14-.475H14.2l-1.05-1.1l1.4-1.4l-.7-.7l-3.55 3.55l.75.7l1.4-1.4l1.05 1.05V9q0 1.142-.813 1.956t-1.956.813H9.546q.577.69.888 1.523q.31.833.291 1.727q0 .122-.012.244t-.024.237"/>
      </svg>`,

      // ✅ авто 2 (из твоих)
      `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path fill="currentColor" d="M7 19q-1.25 0-2.125-.875T4 16H2v-3q0-1.65 1.175-2.825T6 9h4v5h3.5L17 9.65V7h-3V5h3q.825 0 1.413.588T19 7v3.35L14.5 16H10q0 1.25-.875 2.125T7 19m0-2q.425 0 .713-.288T8 16H6q0 .425.288.713T7 17M5 8V6h5v2zm14 11q-1.25 0-2.125-.875T16 16t.875-2.125T19 13t2.125.875T22 16t-.875 2.125T19 19m0-2q.425 0 .713-.288T20 16t-.288-.712T19 15t-.712.288T18 16t.288.713T19 17"/>
      </svg>`,

      // ✅ авто 3 (из твоих)
      `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path fill="currentColor" d="M19 18q.425 0 .713-.288T20 17t-.288-.712T19 16t-.712.288T18 17t.288.713T19 18m0 2q-1.25 0-2.125-.875T16 17t.875-2.125T19 14t2.125.875T22 17t-.875 2.125T19 20M5 18q.425 0 .713-.288T6 17t-.288-.712T5 16t-.712.288T4 17t.288.713T5 18m0 2q-1.25 0-2.125-.875T2 17t.875-2.125T5 14q.95 0 1.725.55t1.1 1.45H13.1q.275-1.725 1.413-2.988T17.3 11.25L15.9 5H12V3h3.9q.7 0 1.25.425t.7 1.125l1.9 8.45H19q-1.65 0-2.825 1.175T15 17v1H7.825q-.325.9-1.1 1.45T5 20"/>
      </svg>`,

      // ✅ авто 4 (из твоих)
      `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path fill="currentColor" d="M4 21q-1.25 0-2.125-.875T1 18q0-.65.25-1.237T2 15.75V11h2V5h8l4.7 11.075q.15.35.225.7T17 17.5q0 1.45-1.025 2.475T13.5 21q-1.025 0-1.888-.537T10.326 19h-3.5q-.325.9-1.1 1.45T4 21m14-1V4h2v14h3v2zM4 19q.425 0 .713-.288T5 18t-.288-.712T4 17t-.712.288T3 18t.288.713T4 19m9.5 0q.625 0 1.063-.437T15 17.5t-.437-1.062T13.5 16t-1.062.438T12 17.5t.438 1.063T13.5 19m-4.575-5h4.725l-2.975-7H6v4z"/>
      </svg>`,

      // ✅ авто 5 (из твоих)
      `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path fill="currentColor" d="M7 21q-1.25 0-2.125-.875T4 18H3q-.825 0-1.412-.587T1 16v-5h11V7q0-.825.588-1.412T14 5h2V4q0-.425.288-.712T17 3h1q.425 0 .713.288T19 4v1h.55q.65 0 1.175.375t.725 1l1.45 4.3q.05.15.075.313t.025.337V18h-3q0 1.25-.875 2.125T17 21t-2.125-.875T14 18h-4q0 1.25-.875 2.125T7 21m0-2q.425 0 .713-.288T8 18t-.288-.712T7 17t-.712.288T6 18t.288.713T7 19m10 0q.425 0 .713-.288T18 18t-.288-.712T17 17t-.712.288T16 18t.288.713T17 19m-3-8h6.9l-1.35-4H14zM1 10V8.5h1v-2H1V5h10v1.5h-1v2h1V10zm2.5-1.5h1.75v-2H3.5zm3.25 0H8.5v-2H6.75z"/>
      </svg>`
    ];

    function create({ sidebarEl, containerEl }) {
      if (!sidebarEl || !containerEl) return;

      let stage = null;
      let logoEl = null;
      let running = false;
      let timer = null;
      let lastIdx = -1;
      const prefersReducedMotion = window.matchMedia("(prefers-reduced-motion: reduce)");

      function buildStage() {
        if (stage) return;
        stage = document.createElement("div");
        stage.className = "mini-logo-stage";
        logoEl = document.createElement("div");
        logoEl.className = "mini-logo-img";
        stage.appendChild(logoEl);
        containerEl.appendChild(stage);
      }

      function pickLogo() {
        if (NORMAL_LOGOS.length === 1) return NORMAL_LOGOS[0];
        let idx = Math.floor(Math.random() * NORMAL_LOGOS.length);
        if (idx === lastIdx) idx = (idx + 1) % NORMAL_LOGOS.length;
        lastIdx = idx;
        return NORMAL_LOGOS[idx];
      }

      function setLogo(svg) {
        if (logoEl) logoEl.innerHTML = svg || "";
      }

      function setPos(pos, transition) {
        if (!logoEl) return;
        logoEl.style.transition = transition || "none";
        logoEl.style.transform =
          pos === "center" ? "translateX(0)" :
          pos === "right"  ? "translateX(120%)" :
                             "translateX(-120%)";
      }

      function stop() {
        running = false;
        if (timer) { clearTimeout(timer); timer = null; }
        if (stage) { stage.remove(); stage = null; logoEl = null; }
      }

      function loop() {
        if (!running || !logoEl) return;

        setLogo(pickLogo());
        setPos("left");
        requestAnimationFrame(() => {
          if (!running) return;
          setPos("center", "transform 280ms ease-out");
          timer = setTimeout(() => {
            if (!running) return;
            setPos("right", "transform 420ms ease-in");
            timer = setTimeout(() => {
              if (!running) return;
              setPos("left");
              timer = setTimeout(loop, 6500);
            }, 420);
          }, 6500);
        });
      }

      function start() {
        if (!sidebarEl.classList.contains("is-collapsed")) return;
        buildStage();

        running = true;

        if (prefersReducedMotion.matches) {
          setLogo(NORMAL_LOGOS[0] || "");
          setPos("center");
          return;
        }

        loop();
      }

      const mo = new MutationObserver(() => {
        if (sidebarEl.classList.contains("is-collapsed")) {
          stop();
          setTimeout(start, 180);
        } else {
          stop();
        }
      });
      mo.observe(sidebarEl, { attributes: true, attributeFilter: ["class"] });

      if (sidebarEl.classList.contains("is-collapsed")) start();
    }

    return { create };
  })();

  CollapsedMenuLogo.create({
    sidebarEl: document.getElementById("sidebar"),
    containerEl: document.getElementById("logoCollapsed")
  });
  </script>
</body>
</html>
