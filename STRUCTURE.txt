cabinet/
├── app/ — основное приложение (frontend + backend)
│   ├── backend/ — серверная часть: контрольная плоскость, API, оркестрация
│   │   ├── bin/ — исполняемые скрипты (worker daemon)
│   │   │   └── worker.php
│   │   ├── public/ — HTTP точка входа
│   │   │   └── index.php
│   │   ├── src/ — исходный код бэкенда
│   │   │   ├── Application/ — слой приложения: команды, queries, сервисы, пайплайн
│   │   │   │   ├── Bus/ — шина команд и событий
│   │   │   │   ├── Commands/ — команды приложения (Auth, Admin, Pipeline, Access)
│   │   │   │   ├── Handlers/ — обработчики команд
│   │   │   │   ├── Integrations/ — порты для внешних интеграций
│   │   │   │   │   ├── BrowserContext/ — порт для контекста браузера
│   │   │   │   │   ├── Parser/ — порт для парсера данных
│   │   │   │   │   ├── PhotoProcessor/ — порт для обработки фото
│   │   │   │   │   ├── Robot/ — порт для робота-исполнителя
│   │   │   │   │   └── Storage/ — порт для хранилища данных
│   │   │   │   ├── Observability/ — наблюдаемость на уровне приложения
│   │   │   │   ├── Pipeline/ — оркестрация этапов выполнения задач
│   │   │   │   │   ├── Drivers/ — драйверы этапов (Parse, Photos, Publish, Export, Cleanup)
│   │   │   │   │   ├── Events/ — события пайплайна
│   │   │   │   │   └── Workers/ — воркеры для асинхронной обработки этапов
│   │   │   │   ├── Policies/ — политики безопасности и доступа
│   │   │   │   ├── Ports/ — интерфейсы для внешних зависимостей
│   │   │   │   ├── Preconditions/ — проверки предусловий (guards)
│   │   │   │   ├── Queries/ — запросы на чтение (Admin, Security, Tasks, Integrations)
│   │   │   │   ├── Security/ — security-абстракции приложения
│   │   │   │   │   └── Encryption/ — интерфейс сервиса шифрования
│   │   │   │   ├── Services/ — доменные сервисы приложения
│   │   │   │   └── Shared/ — общие компоненты приложения
│   │   │   ├── Bootstrap/ — инициализация: контейнер, конфиг, ядро, clock
│   │   │   ├── Domain/ — доменный слой: сущности, value objects, правила
│   │   │   │   ├── Pipeline/ — доменная модель пайплайна и переходов
│   │   │   │   ├── Shared/ — общие доменные компоненты
│   │   │   │   │   ├── Enum/ — перечисления (TaskStatus, UserRole)
│   │   │   │   │   ├── Exceptions/ — доменные исключения
│   │   │   │   │   └── ValueObject/ — объекты-значения (Email, Nonce, Ulid, EncryptedPayload)
│   │   │   │   ├── Tasks/ — доменная модель задач
│   │   │   │   └── Users/ — доменная модель пользователей и прав доступа
│   │   │   ├── Http/ — HTTP-слой: контроллеры, middleware, роутинг, валидация
│   │   │   │   ├── Controllers/ — контроллеры API endpoints
│   │   │   │   ├── Kernel/ — ядро HTTP-обработки
│   │   │   │   ├── Middleware/ — middleware (CORS, JSON, TraceId, ErrorHandler, BodySizeLimit, WebhookAuth)
│   │   │   │   ├── Responses/ — обработка и форматирование ответов API
│   │   │   │   ├── Routing/ — определение маршрутов
│   │   │   │   ├── Security/ — security pipeline для HTTP-запросов
│   │   │   │   │   ├── Pipeline/ — этапы security pipeline (Auth, Nonce, Signature, Encryption, Hierarchy, Scope, RateLimit)
│   │   │   │   │   └── Requirements/ — определение требований безопасности для endpoints
│   │   │   │   └── Validation/ — валидация запросов и протокола
│   │   │   │       ├── Protocol/ — валидация структуры команд, nonce, idempotency
│   │   │   │       └── Request/ — валидация HTTP-запросов (schema, pagination, includeFields)
│   │   │   ├── Infrastructure/ — инфраструктурный слой: БД, кэш, security, интеграции
│   │   │   │   ├── BackgroundTasks/ — фоновые задачи (ротация ключей, cleanup nonce, оптимизация очереди)
│   │   │   │   ├── Cache/ — кэширование (Redis, QueryCache, CacheWarmer)
│   │   │   │   ├── Integrations/ — реализация адаптеров интеграций
│   │   │   │   │   ├── BrowserContext/ — адаптеры контекста браузера (Real + Fallback)
│   │   │   │   │   ├── Parser/ — адаптеры парсера (Real + Fallback)
│   │   │   │   │   ├── PhotoProcessor/ — адаптеры обработки фото (Real + Fallback)
│   │   │   │   │   ├── Registry/ — регистр интеграций и сертификатов
│   │   │   │   │   ├── Robot/ — адаптеры робота-исполнителя (Real + Fallback)
│   │   │   │   │   ├── Shared/ — общая инфраструктура интеграций (CircuitBreaker, HttpClient, SignedRequest)
│   │   │   │   │   └── Storage/ — адаптеры хранилища (S3 + Fallback)
│   │   │   │   ├── Observability/ — наблюдаемость: логи, метрики, трассировка, audit, health
│   │   │   │   │   ├── Audit/ — аудит действий
│   │   │   │   │   ├── Health/ — health checks (Database, Redis)
│   │   │   │   │   ├── Logging/ — логирование (Structured, Secure, Sentry, Db, Redactor)
│   │   │   │   │   ├── Metrics/ — метрики (Prometheus, Business)
│   │   │   │   │   └── Tracing/ — распределенная трассировка (OpenTelemetry)
│   │   │   │   ├── Persistence/ — слой персистентности
│   │   │   │   │   └── PDO/ — реализация на PDO
│   │   │   │   │       ├── Repositories/ — репозитории (Tasks, Users, Audit, Queue, Nonce, Security, Idempotency, Lock, DLQ)
│   │   │   │   │       ├── ConnectionFactory.php — фабрика подключений к БД
│   │   │   │   │       └── MigrationsRunner.php — запуск миграций
│   │   │   │   ├── Queue/ — очередь задач (QueueService, DLQ, Metrics)
│   │   │   │   ├── ReadModels/ — read models для запросов
│   │   │   │   │   └── Projections/ — проекции данных (Security, Task)
│   │   │   │   ├── Security/ — реализация инфраструктуры безопасности
│   │   │   │   │   ├── AttackProtection/ — защита от атак (RateLimiter, SQLInjection, XSS)
│   │   │   │   │   ├── Audit/ — аудит безопасности
│   │   │   │   │   ├── Certificates/ — управление сертификатами
│   │   │   │   │   ├── Encryption/ — реализация шифрования (Symmetric, Asymmetric, Hybrid, DataEncryption)
│   │   │   │   │   ├── Identity/ — идентификация (JWT, 2FA)
│   │   │   │   │   ├── Keys/ — управление криптоключами (KeyStore, KeyRotation, KeyExchange)
│   │   │   │   │   ├── Nonce/ — валидация и управление nonce
│   │   │   │   │   │   └── _internal/ — внутренние компоненты (AtomicStore, Cleanup, LockKey)
│   │   │   │   │   ├── Signatures/ — подписи запросов (Verifier, Canonicalizer, StringToSign)
│   │   │   │   │   └── Vault/ — работа с Vault для секретов
│   │   │   │   └── Ws/ — WebSocket сервер и эмиттер событий
│   │   │   └── README.md
│   │   ├── tests/ — тесты бэкенда
│   │   │   ├── Architecture/ — архитектурные тесты (границы слоев, контракты)
│   │   │   ├── Feature/ — функциональные тесты
│   │   │   ├── Integration/ — интеграционные тесты
│   │   │   ├── Unit/ — юнит-тесты (Domain, Integrations, Pipeline, Security)
│   │   │   └── run.php — запуск тестов
│   │   └── README.md
│   └── frontend/ — клиентская часть: operator control panel (desktop-only UI)
│       ├── src/ — исходный код фронтенда
│       │   ├── api/ — API клиент
│       │   ├── app/ — конфигурация приложения
│       │   ├── components/ — UI компоненты
│       │   ├── contracts/ — контракты протокола
│       │   ├── entities/ — бизнес-сущности (Feature-Sliced Design)
│       │   ├── features/ — фичи приложения (Feature-Sliced Design)
│       │   ├── pages/ — страницы приложения
│       │   ├── shared/ — общие модули
│       │   │   ├── access/ — контроль доступа
│       │   │   ├── api/ — API-клиент и endpoints
│       │   │   ├── auth/ — аутентификация
│       │   │   ├── runtime/ — runtime-компоненты
│       │   │   │   └── security/ — криптография на клиенте (encryption, nonce, signature, keyExchange)
│       │   │   ├── security/ — security utilities
│       │   │   ├── trace/ — трассировка
│       │   │   ├── ui/ — UI-компоненты
│       │   │   └── ws/ — WebSocket клиент
│       │   ├── tests/ — тесты фронтенда
│       │   ├── types/ — TypeScript типы
│       │   ├── index.css — глобальные стили
│       │   └── main.tsx — точка входа приложения
│       ├── index.html — HTML entry point
│       ├── package.json — зависимости фронтенда
│       ├── tsconfig.json — конфигурация TypeScript
│       ├── vite.config.ts — конфигурация Vite
│       ├── SETUP.md — инструкция по настройке
│       └── README.md
├── automation/ — автоматизация (зарезервировано)
├── config/ — конфигурационные файлы (зарезервировано)
├── dev/ — инструменты разработки (зарезервировано)
├── docs/ — документация проекта
│   └── README.md
├── governance/ — правила управления проектом (зарезервировано)
├── platform/ — платформенные компоненты (зарезервировано)
├── scripts/ — утилитарные скрипты (зарезервировано)
├── security/ — документация по безопасности
│   └── README.md
├── shared/ — общие ресурсы между backend и frontend
│   ├── canonicalization/ — канонизация данных (зарезервировано)
│   ├── contracts/ — единый источник истины для протокола: типы, enums, векторы тестирования
│   │   ├── implementations/ — реализации контрактов
│   │   │   ├── php/ — PHP реализация контрактов (AssetRef, CapabilitySet, ErrorKind, Status, TraceContext)
│   │   │   └── ts/ — TypeScript реализация контрактов
│   │   ├── primitives/ — описание примитивов протокола (Actor, ErrorKind, Scope, Status, TraceContext, PipelineStage)
│   │   ├── tests/ — тесты паритета реализаций (PHP ↔ TypeScript)
│   │   ├── tools/ — инструменты генерации контрактов
│   │   ├── vectors/ — test vectors для криптографии и протокола (encryption, nonce, signature, headers, scopes, actors)
│   │   └── README.md
│   └── crypto/ — общие криптографические компоненты (зарезервировано)
├── tests/ — тесты на уровне всей системы
│   ├── e2e/ — end-to-end тесты
│   ├── integration/ — интеграционные тесты
│   └── security/ — security тесты
├── tools/ — утилиты проекта
│   └── text_audit.php
├── .editorconfig — настройки редактора
├── .env.example — пример конфигурации окружения
├── .gitattributes — атрибуты git
├── .gitignore — игнорируемые файлы
├── commitlint.config.js — настройки проверки commit-сообщений
├── composer.json — зависимости PHP проекта
├── docker-compose.yml — конфигурация Docker
├── ENCRYPTION-SCHEME.md — документация схемы шифрования
├── eslint.config.js — настройки ESLint для JavaScript/TypeScript
├── HIERARCHY-GUIDE.md — руководство по иерархии доступа
├── Makefile — команды сборки и управления
├── package.json — зависимости Node.js проекта (root)
├── phpcs.xml — настройки PHP CodeSniffer
├── phpmd.xml — настройки PHP Mess Detector
├── phpstan.neon — настройки PHPStan
├── psalm.xml — настройки Psalm
├── README.md — основное описание проекта
├── SECURITY-IMPLEMENTATION.md — документация реализации безопасности
├── security-rules.xml — правила безопасности
├── STRUCTURE.txt — данный файл: структура проекта
└── stylelint.config.js — настройки линтера стилей
