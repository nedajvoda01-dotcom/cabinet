server/
├── README.md                 # Что это за платформа и как ей пользоваться
├── docker-compose.yml        # Локальный запуск (platform + adapters + ui)
├── .env.example              # Общие не-секретные настройки

├── platform/                 # ТОНКОЕ ЯДРО (trusted)
│   ├── index.php             # Единая HTTP точка входа (/api/*)
│   ├── Router.php            # capability → adapter
│   ├── Policy.php            # allow/deny + scopes
│   ├── Limits.php            # rate / size / timeout
│   ├── ResultGate.php        # фильтрация результата
│   └── Storage.php           # минимальный state (runs/audit)

├── registry/                 # ИСТОЧНИК ИСТИНЫ (data, не код)
│   ├── adapters.yaml         # список адаптеров (id → url)
│   ├── capabilities.yaml     # capability → adapter
│   ├── ui.yaml               # ui → разрешённые capabilities
│   └── policy.yaml           # роли / доступ / ограничения

├── adapters/                 # ВСЯ БИЗНЕС-ЛОГИКА (untrusted)
│   ├── car-storage/
│   │   ├── invoke.php        # обработка capability
│   │   ├── capabilities.yaml
│   │   └── README.md
│   ├── pricing/
│   │   ├── invoke.php
│   │   ├── capabilities.yaml
│   │   └── README.md
│   └── automation/
│       ├── invoke.php
│       ├── capabilities.yaml
│       └── README.md

├── ui/                       # КЛИЕНТЫ (untrusted)
│   ├── admin/
│   │   ├── index.html
│   │   └── src/
│   └── public/
│       ├── index.html
│       └── src/

├── tests/
│   └── smoke.http            # простые e2e проверки

└── scripts/
    └── run-local.sh          # запуск всего локально
