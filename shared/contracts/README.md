Shared Contracts - –ï–¥–∏–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
Shared Contracts ‚Äî —ç—Ç–æ –µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ —Å–∏—Å—Ç–µ–º—ã Cabinet. –ú—ã —É—Å—Ç—Ä–∞–Ω—è–µ–º —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è –º–µ–∂–¥—É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º –∏ –±—ç–∫–µ–Ω–¥–æ–º, —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑—É—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤, —Å—Ö–µ–º –∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–∞
text
shared/contracts/
‚îú‚îÄ‚îÄ README.md                      # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ primitives/                    # –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ —Ç–∏–ø—ã —Å–∏—Å—Ç–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ Status.md                  # –°—Ç–∞—Ç—É—Å—ã –æ–ø–µ—Ä–∞—Ü–∏–π –∏ –∑–∞–¥–∞—á
‚îÇ   ‚îú‚îÄ‚îÄ ErrorKind.md               # –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—à–∏–±–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ TraceContext.md            # –ö–æ–Ω—Ç–µ–∫—Å—Ç —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ CapabilitySet.md           # –ù–∞–±–æ—Ä –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îÇ   ‚îî‚îÄ‚îÄ AssetRef.md                # –°—Å—ã–ª–∫–∏ –Ω–∞ —Ä–µ—Å—É—Ä—Å—ã (–∑–∞–¥–∞—á–∏, —Ñ–∞–π–ª—ã –∏ —Ç.–¥.)
‚îú‚îÄ‚îÄ vectors/                       # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ nonce-vectors.json         # –ü—Ä–∏–º–µ—Ä—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö/–Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö nonce
‚îÇ   ‚îú‚îÄ‚îÄ signature-vectors.json     # –¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–¥–ø–∏—Å–∏ –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ encryption-vectors.json    # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ canonicalization-vectors.json # –ü—Ä–∏–º–µ—Ä—ã –∫–∞–Ω–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–ª—è –ø–æ–¥–ø–∏—Å–µ–π
‚îî‚îÄ‚îÄ implementations/               # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥
    ‚îú‚îÄ‚îÄ php/                       # PHP —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
    ‚îÇ   ‚îú‚îÄ‚îÄ Status.php
    ‚îÇ   ‚îú‚îÄ‚îÄ Error.php
    ‚îÇ   ‚îú‚îÄ‚îÄ ErrorKind.php
    ‚îÇ   ‚îú‚îÄ‚îÄ AssetRef.php
    ‚îÇ   ‚îú‚îÄ‚îÄ IntegrationHealth.php
    ‚îÇ   ‚îú‚îÄ‚îÄ CapabilitySet.php
    ‚îÇ   ‚îî‚îÄ‚îÄ TraceContext.php
    ‚îî‚îÄ‚îÄ typescript/                # TypeScript —Ç–∏–ø—ã
        ‚îú‚îÄ‚îÄ status.ts
        ‚îú‚îÄ‚îÄ errorKind.ts
        ‚îú‚îÄ‚îÄ assetRef.ts
        ‚îú‚îÄ‚îÄ capabilitySet.ts
        ‚îî‚îÄ‚îÄ traceContext.ts
üö´ –ü—Ä–æ–±–ª–µ–º–∞, –∫–æ—Ç–æ—Ä—É—é —Ä–µ—à–∞–µ–º
–î–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è Shared Contracts:

typescript
// app/frontend/src/shared/api/contracts/common.ts
interface Task {
  id: string;
  status: 'pending' | 'processing' | 'completed'; // ‚Üê –æ–¥–Ω–∏ –∑–Ω–∞—á–µ–Ω–∏—è
}

// app/backend/src/Application/Contracts/Status.php
class Status {
  const PENDING = 'pending';
  const IN_PROGRESS = 'in_progress'; // ‚Üê –¥—Ä—É–≥–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è!
  const DONE = 'done';
}
–°–∏–º–ø—Ç–æ–º—ã:

–†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è –≤ –∏–º–µ–Ω–æ–≤–∞–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–æ–≤

–†–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –æ—à–∏–±–æ–∫

–ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö

–°–ª–æ–∂–Ω–æ—Å—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π

‚úÖ –†–µ—à–µ–Ω–∏–µ
1. –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
–í—Å–µ –æ–±—â–∏–µ —Ç–∏–ø—ã –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –µ–¥–∏–Ω–æ–∂–¥—ã –≤ markdown-—Ñ–∞–π–ª–∞—Ö —Å —á—ë—Ç–∫–∏–º–∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è–º–∏:

–ü—Ä–∏–º–µ—Ä primitives/Status.md:

markdown
# Status - –°—Ç–∞—Ç—É—Å—ã –æ–ø–µ—Ä–∞—Ü–∏–π

## –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ —Å–∏—Å—Ç–µ–º–µ.

## –ó–Ω–∞—á–µ–Ω–∏—è
- `pending` - –û–∂–∏–¥–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏
- `processing` - –í –ø—Ä–æ—Ü–µ—Å—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è  
- `completed` - –£—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à—ë–Ω
- `failed` - –ó–∞–≤–µ—Ä—à–∏–ª—Å—è –æ—à–∏–±–∫–æ–π
- `cancelled` - –û—Ç–º–µ–Ω—ë–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

## –ü—Ä–∞–≤–∏–ª–∞
1. –í—Å–µ –Ω–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å `pending`
2. –ü–µ—Ä–µ—Ö–æ–¥ `pending` ‚Üí `processing` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
3. –ò–∑ `completed` –Ω–µ–ª—å–∑—è –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ –¥—Ä—É–≥–∏–µ —Å—Ç–∞—Ç—É—Å—ã
4. `failed` –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω (–≤–æ–∑–≤—Ä–∞—Ç –≤ `pending`)
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞
Workflow:

text
1. –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω—è–µ—Ç Status.md
2. –ó–∞–ø—É—Å–∫–∞–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä: make generate-contracts
3. –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã —Å–æ–∑–¥–∞—é—Ç:
   - implementations/php/Status.php
   - implementations/typescript/status.ts
4. –ò–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–º–º–∏—Ç—è—Ç—Å—è –≤–º–µ—Å—Ç–µ
–ö–æ–º–∞–Ω–¥—ã:

bash
# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
make generate-contracts

# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ PHP
make generate-contracts-php

# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ TypeScript  
make generate-contracts-ts

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ
make validate-contracts
3. –ò–º–ø–æ—Ä—Ç –≤ –ø—Ä–æ–µ–∫—Ç—ã
Backend (PHP):

php
// app/backend/composer.json
{
    "autoload": {
        "psr-4": {
            "App\\": "src/",
            "SharedContracts\\": "../shared/contracts/implementations/php/"
        }
    }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
use SharedContracts\Status;
use SharedContracts\ErrorKind;

class TaskService {
    public function create(): Task {
        return new Task(
            status: Status::PENDING,
            // ...
        );
    }
}
Frontend (TypeScript):

typescript
// app/frontend/package.json
{
  "dependencies": {
    "@shared/contracts": "file:../shared/contracts/implementations/typescript"
  }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
import { Status, ErrorKind } from '@shared/contracts';

interface Task {
  id: string;
  status: Status; // –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!
}

if (task.status === Status.PENDING) {
  // ...
}
üî¨ –¢–µ—Å—Ç–æ–≤—ã–µ –≤–µ–∫—Ç–æ—Ä—ã (vectors/)
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–í–µ–∫—Ç–æ—Ä—ã —Å–æ–¥–µ—Ä–∂–∞—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –∏ –¥—Ä—É–≥–∏—Ö —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤.

–ü—Ä–∏–º–µ—Ä vectors/signature-vectors.json:

json
{
  "version": "1.0",
  "algorithm": "ED25519",
  "vectors": [
    {
      "name": "simple_request",
      "description": "–ü—Ä–æ—Å—Ç–æ–π GET –∑–∞–ø—Ä–æ—Å",
      "input": {
        "method": "GET",
        "path": "/api/tasks",
        "query": "limit=10&offset=0",
        "headers": {
          "X-Timestamp": "2024-01-15T10:30:00Z",
          "X-Nonce": "01HQTK1R2XQ5Q7QZJZQZQZQZQZ"
        },
        "body": null
      },
      "canonical_form": "GET\n/api/tasks\nlimit=10&offset=0\nx-nonce:01HQTK1R2XQ5Q7QZJZQZQZQZQZ\nx-timestamp:2024-01-15T10:30:00Z\n",
      "private_key": "2f3b...",
      "expected_signature": "3a7f...",
      "purpose": "–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–Ω–æ–Ω–∏–∑–∞—Ü–∏–∏ –∏ –ø–æ–¥–ø–∏—Å–∏ –ø—Ä–æ—Å—Ç–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞"
    }
  ]
}
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–æ–≤
Backend —Ç–µ—Å—Ç:

php
class SignatureServiceTest extends TestCase
{
    public function test_vectors(): void
    {
        $vectors = json_decode(
            file_get_contents('../../shared/contracts/vectors/signature-vectors.json'),
            true
        );
        
        foreach ($vectors['vectors'] as $vector) {
            $signature = $this->service->sign(
                $vector['input'],
                $vector['private_key']
            );
            
            $this->assertEquals(
                $vector['expected_signature'],
                $signature,
                "Vector failed: {$vector['name']}"
            );
        }
    }
}
Frontend —Ç–µ—Å—Ç:

typescript
import signatureVectors from '@shared/contracts/vectors/signature-vectors.json';

describe('Signature canonicalizer', () => {
  signatureVectors.vectors.forEach((vector) => {
    it(`should pass ${vector.name}`, () => {
      const canonical = canonicalizeRequest(vector.input);
      expect(canonical).toBe(vector.canonical_form);
    });
  });
});
üìã –°–ø–∏—Å–æ–∫ –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤
1. Status - –°—Ç–∞—Ç—É—Å—ã –æ–ø–µ—Ä–∞—Ü–∏–π
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è: –∑–∞–¥–∞—á, –∑–∞–¥–∞–Ω–∏–π pipeline, –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

2. ErrorKind - –¢–∏–ø—ã –æ—à–∏–±–æ–∫
text
validation      - –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
authentication  - –ü—Ä–æ–±–ª–µ–º—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
authorization   - –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤
not_found       - –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω
rate_limit      - –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤
integration     - –û—à–∏–±–∫–∞ –≤–Ω–µ—à–Ω–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
internal        - –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–∏—Å—Ç–µ–º—ã
3. TraceContext - –ö–æ–Ω—Ç–µ–∫—Å—Ç —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏
typescript
{
  traceId: string;      // ULID —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏
  spanId: string;       // ULID —Ç–µ–∫—É—â–µ–≥–æ span
  parentSpanId?: string; // ULID —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ span
  userId?: string;      // ULID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–µ—Å–ª–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω)
  sessionId?: string;   // ID —Å–µ—Å—Å–∏–∏
  clientId?: string;    // –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–ª–∏–µ–Ω—Ç–∞ (–±—Ä–∞—É–∑–µ—Ä, –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
}
4. CapabilitySet - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
typescript
// –í–ú–ï–°–¢–û –†–û–õ–ï–ô!
type CapabilitySet = {
  // –ó–∞–¥–∞—á–∏
  can_create_task: boolean;
  can_view_all_tasks: boolean;
  can_edit_own_tasks: boolean;
  
  // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
  can_invite_users: boolean;
  can_view_user_hierarchy: boolean;
  
  // –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ
  can_view_system_metrics: boolean;
  can_manage_integrations: boolean;
  
  // –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
  can_view_audit_logs: boolean;
  can_manage_api_keys: boolean;
};
5. AssetRef - –°—Å—ã–ª–∫–∞ –Ω–∞ —Ä–µ—Å—É—Ä—Å
–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ª—é–±–æ–π —Ä–µ—Å—É—Ä—Å –≤ —Å–∏—Å—Ç–µ–º–µ:

typescript
{
  type: 'task' | 'photo' | 'document' | 'user';
  id: string;           // ULID —Ä–µ—Å—É—Ä—Å–∞
  encryptedContext?: string; // –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç (E2E)
  signature?: string;   // –ü–æ–¥–ø–∏—Å—å —Å—Å—ã–ª–∫–∏ (–∑–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–¥–¥–µ–ª–∫–∏)
}
üîÑ –†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
–°—Ü–µ–Ω–∞—Ä–∏–π: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞
–®–∞–≥ 1: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤ primitives/

markdown
# –í primitives/Status.md –¥–æ–±–∞–≤–ª—è–µ–º:
- `archived` - –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω, –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è
–®–∞–≥ 2: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞

bash
make generate-contracts
–®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞

PHP:

php
// implementations/php/Status.php
class Status {
    const PENDING = 'pending';
    const PROCESSING = 'processing';
    const COMPLETED = 'completed';
    const FAILED = 'failed';
    const CANCELLED = 'cancelled';
    const ARCHIVED = 'archived'; // ‚Üê –Ω–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å!
    
    public static function all(): array {
        return [
            self::PENDING,
            self::PROCESSING,
            self::COMPLETED,
            self::FAILED,
            self::CANCELLED,
            self::ARCHIVED, // ‚Üê –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω
        ];
    }
}
TypeScript:

typescript
// implementations/typescript/status.ts
export type Status = 
  | 'pending'
  | 'processing' 
  | 'completed'
  | 'failed'
  | 'cancelled'
  | 'archived'; // ‚Üê –Ω–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å!

export const StatusValues = {
  PENDING: 'pending' as Status,
  PROCESSING: 'processing' as Status,
  COMPLETED: 'completed' as Status,
  FAILED: 'failed' as Status,
  CANCELLED: 'cancelled' as Status,
  ARCHIVED: 'archived' as Status, // ‚Üê –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω
};
–®–∞–≥ 4: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ
–¢–µ–ø–µ—Ä—å –æ–±–∞ —Å–ª–æ—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.

üß™ –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ CI
.github/workflows/validate-contracts.yml:

yaml
name: Validate Contracts
on: [push, pull_request]

jobs:
  validate:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Generate contracts
        run: make generate-contracts
        
      - name: Check for changes
        run: |
          if git diff --name-only | grep -q "implementations/"; then
            echo "‚ùå –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∏—Å—Ö–æ–¥–Ω–∏–∫–∞–º!"
            echo "–ó–∞–ø—É—Å—Ç–∏—Ç–µ: make generate-contracts"
            git diff
            exit 1
          fi
          
      - name: Run parity tests
        run: |
          cd app/frontend
          npm run test:contracts
–†—É—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ OpenAPI –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
make validate-openapi-parity

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç shared/contracts
make check-contract-imports

# –ù–∞–π—Ç–∏ "–∑–∞–±—ã—Ç—ã–µ" –ª–æ–∫–∞–ª—å–Ω—ã–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
make find-local-contracts
üö® –ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏ –∑–∞–ø—Ä–µ—Ç—ã
‚ùå –ù–ï–õ–¨–ó–Ø
php
// app/backend/src/Application/Services/TaskService.php
class TaskService {
    // –ù–µ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∑–¥–µ—Å—å!
    const STATUS_NEW = 'new'; // ‚ùå
    
    public function create() {
        return ['status' => 'new']; // ‚ùå —Å—Ç—Ä–æ–∫–æ–≤—ã–µ –ª–∏—Ç–µ—Ä–∞–ª—ã
    }
}
typescript
// app/frontend/src/entities/task/model.ts
interface Task {
  status: 'new' | 'in_work' | 'done'; // ‚ùå –ª–æ–∫–∞–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
}
‚úÖ –ù–£–ñ–ù–û
php
use SharedContracts\Status;

class TaskService {
    public function create() {
        return ['status' => Status::PENDING]; // ‚úÖ
    }
}
typescript
import { Status } from '@shared/contracts';

interface Task {
  status: Status; // ‚úÖ
}
üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
–°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏: scripts/check-contract-usage.sh

bash
#!/bin/bash
# –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –ª–∏—Ç–µ—Ä–∞–ª–æ–≤ –≤–º–µ—Å—Ç–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤

echo "üîç –ü–æ–∏—Å–∫ —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö —Å—Ç–∞—Ç—É—Å–æ–≤..."
grep -r "'pending'\|'processing'\|'completed'" app/backend/src app/frontend/src --include="*.php" --include="*.ts" --include="*.tsx"

echo "üîç –ü–æ–∏—Å–∫ –ª–æ–∫–∞–ª—å–Ω—ã—Ö enum/const –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π..."
grep -r "const.*=.*'pending'" app/backend/src app/frontend/src

echo "‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤ shared/contracts..."
grep -r "from.*@shared/contracts\|use.*SharedContracts" app/frontend/src app/backend/src
üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞
–ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏
–≠—Ç–∞–ø 1: –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–∏–ø—ã

bash
# –ù–∞–π—Ç–∏ –≤—Å–µ enum/const –≤ –ø—Ä–æ–µ–∫—Ç–µ
find app/ -name "*.php" -o -name "*.ts" -o -name "*.tsx" | xargs grep -h "const.*=" | sort | uniq
–≠—Ç–∞–ø 2: –°–æ–∑–¥–∞—Ç—å primitives/ —Ñ–∞–π–ª—ã –¥–ª—è –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤

–≠—Ç–∞–ø 3: –ó–∞–º–µ–Ω–∏—Ç—å —Å—Ç—Ä–æ–∫–æ–≤—ã–µ –ª–∏—Ç–µ—Ä–∞–ª—ã –Ω–∞ –∏–º–ø–æ—Ä—Ç—ã

–≠—Ç–∞–ø 4: –û–±–Ω–æ–≤–∏—Ç—å —Ç–µ—Å—Ç—ã

–ü—Ä–∏–º–µ—Ä –º–∏–≥—Ä–∞—Ü–∏–∏
–î–æ:

php
// app/backend/src/Domain/Tasks/Task.php
class Task {
    const STATUS_NEW = 'new';
    const STATUS_IN_PROGRESS = 'in_progress';
    
    private string $status = self::STATUS_NEW;
}
–ü–æ—Å–ª–µ:

php
use SharedContracts\Status;

class Task {
    private string $status = Status::PENDING;
    
    public function markInProgress(): void {
        $this->status = Status::PROCESSING;
    }
}
ü§ù –°–æ–≥–ª–∞—à–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã
–ü—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏–π
–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–∏–º–∏—Ç–∏–≤–∞ ‚Üí —Ç—Ä–µ–±—É–µ—Ç approve 2 senior —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–∏–º–∏—Ç–∏–≤–∞ ‚Üí —Ç–∏–∫–µ—Ç + –æ–ø–∏—Å–∞–Ω–∏–µ –≤ primitives/*.md

–ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–æ–≤ ‚Üí –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —Ç–µ—Å—Ç—ã

–í–µ—Ç–≤–ª–µ–Ω–∏–µ
text
feature/add-archive-status/
‚îú‚îÄ‚îÄ shared/contracts/primitives/Status.md
‚îú‚îÄ‚îÄ shared/contracts/implementations/php/Status.php
‚îú‚îÄ‚îÄ shared/contracts/implementations/typescript/status.ts
‚îú‚îÄ‚îÄ app/backend/src/... (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞)
‚îî‚îÄ‚îÄ app/frontend/src/... (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞)
üìà –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
Dashboard –¥–æ—Å—Ç—É–ø–µ–Ω —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∞–º:

–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤: 5+

–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–µ–∫—Ç–æ—Ä–æ–≤: 20+ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å–ª—É—á–∞–µ–≤

Coverage –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è: 95%+ (—Ü–µ–ª—å)

–†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è: 0 (—Ü–µ–ª—å)

üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è ‚Äî HTTP –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã

Security –≤–µ–∫—Ç–æ—Ä—ã ‚Äî –∫–∞–Ω–æ–Ω–∏–∑–∞—Ü–∏—è –¥–ª—è –ø–æ–¥–ø–∏—Å–µ–π

–¢–µ—Å—Ç—ã parity ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è

üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞
–ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏:

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å make validate-contracts

–ó–∞–ø—É—Å—Ç–∏—Ç—å make generate-contracts

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–ª–∞—Å—å ‚Äî —Å–æ–∑–¥–∞—Ç—å issue —Å —Ç–µ–≥–æ–º [contracts]

–í–æ–ø—Ä–æ—Å—ã –ø–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤:

–û–±—Å—É–¥–∏—Ç—å –Ω–∞ planning meeting

–°–æ–∑–¥–∞—Ç—å RFC –≤ docs/architecture/decisions/

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ approval

–ò—Ç–æ–≥: Shared Contracts ‚Äî —ç—Ç–æ –æ—Å–Ω–æ–≤–∞ —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ Cabinet.
–û–¥–∏–Ω —Ä–∞–∑ –æ–ø—Ä–µ–¥–µ–ª–∏–ª ‚Äî –≤–µ–∑–¥–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

text

---

‚úÖ **shared/contracts/README.md** ‚Äî –≥–æ—Ç–æ–≤. –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Å:
- –§–∏–ª–æ—Å–æ—Ñ–∏–µ–π –∏ –ø—Ä–æ–±–ª–µ–º–∞—Ç–∏–∫–æ–π
- –°—Ç—Ä—É–∫—Ç—É—Ä–æ–π –∫–∞—Ç–∞–ª–æ–≥–∞
- –†–∞–±–æ—á–∏–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
- –ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏
- –ú–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏
- –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
